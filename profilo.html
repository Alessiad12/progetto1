<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profilo Utente</title>
    <link rel="stylesheet" href="css/style_profilo.css">
</head>
<body>
    <div class="profile-container">
        <div class="foto_profilo">
            <div class="contenitore_foto">
                <button class="nav-button prev" onclick="prevProfilePic()">&#9664;</button>
                <img src="profile1.jpg" alt="Foto profilo 1" class="profile-pic active">
                <img src="profile2.jpg" alt="Foto profilo 2" class="profile-pic">
                <img src="profile3.jpg" alt="Foto profilo 3" class="profile-pic">
                <button class="nav-button next" onclick="nextProfilePic()">&#9654;</button>
            </div>
        </div>
        <div class="descrizione_profilo">
            <div class="name-age" id="user-fullname"></div>

            <div class="bio">Amante dei viaggi e dell'avventura! Sempre alla ricerca di nuove esperienze nel mondo.</div>
            <button class="companions-button" onclick="toggleCompanions()">Compagni di viaggio</button>
            <div class="companions-list" id="companions">
                <ul>
                    <li>Alice Bianchi</li>
                    <li>Marco Verdi</li>
                    <li>Elena Neri</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="photo-gallery">
        <h3>I miei viaggi!</h3>
        <div class="photos">
            <img src="foto1.jpg" alt="Viaggio a Roma">
            <img src="foto2.jpg" alt="Viaggio in Grecia">
            <img src="foto3.jpg" alt="Viaggio in Islanda">
            <img src="foto4.jpg" alt="Viaggio a Parigi">
            <img src="foto5.jpg" alt="Viaggio in Giappone">
            <img src="foto6.jpg" alt="Viaggio in Norvegia">
        </div>
    </div>
    <div class="user-menu dropdown" id="userMenu">
        <div class="user-initial" id="user-initial">?</div>
        <div class="dropdown-content" id="dropdownMenu"> 
            <a href="#" onclick="logout()">Logout</a>
        </div>
    </div>
    
    

    <script>
        let currentPic = 0;
        const pics = document.querySelectorAll('.profile-pic');
    
        function showPic(index) {
            pics.forEach((pic, i) => {
                pic.classList.toggle('active', i === index);
            });
        }
    
        function prevProfilePic() {
            currentPic = (currentPic - 1 + pics.length) % pics.length;
            showPic(currentPic);
        }
    
        function nextProfilePic() {
            currentPic = (currentPic + 1) % pics.length;
            showPic(currentPic);
        }
    
        function toggleCompanions() {
            const companions = document.getElementById('companions');
            const hasItems = companions.querySelector('li');
    
            if (!hasItems) {
                companions.innerHTML = '<p>Nessun compagno di viaggio al momento.</p>';
            }
    
            companions.style.display = companions.style.display === 'block' ? 'none' : 'block';
        }
        //inserire i dati della registrazione nel profilo
        document.addEventListener("DOMContentLoaded", () => { // aspetta che l'intera pagina sia caricata
            const name = localStorage.getItem("userName") || "errore nome";
            const age = 28; // da modificare
            const fullNameElement = document.getElementById("user-fullname");

            if (fullNameElement) {
                fullNameElement.textContent = `${name}, ${age}`;
            }

        });
        document.addEventListener("DOMContentLoaded", () => {
            const menuButton = document.getElementById("userMenu");
            const dropdown = document.getElementById("dropdownMenu");

            menuButton.addEventListener("click", (e) => {
                e.stopPropagation(); // Evita che il click venga intercettato dal body
                dropdown.classList.toggle("show"); // Apre o chiude il menÃ¹
            });

            // Chiudi il menu se clicchi fuori
            document.body.addEventListener("click", () => {
                dropdown.classList.remove("show");
            });
        });

        function logout() {
            localStorage.clear();
            window.location.href = "login.html";
        }
    </script>
</body>
</html>
